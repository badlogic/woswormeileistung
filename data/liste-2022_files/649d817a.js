import{S as e,i as s,n as t,e as a,c as n,w as o,v as l,L as r,a as i,b as c,d as h,y as m,f,x as p,o as u,g as $,m as d,z as g,l as w,aj as y,p as b,j as S,q as O,t as k,k as z,N,O as v,aa as P}from"./61b97c49.js";import{n as T,w as L,p as j,d as A}from"./63e54d4e.js";import{g as B}from"./d6a75b19.js";import{I as E}from"./9dfe3a43.js";const K="undefined"!=typeof window;let U;const _=()=>{if(!U&&K){let e={};try{localStorage.myPt&&(e=localStorage.myPt?JSON.parse(localStorage.myPt):{})}catch(s){e={}}U=L(e),U.subscribe((e=>{K&&(localStorage.myPt=JSON.stringify(e))}))}return U},x=(e,s=!1)=>{U.set({...U,bookmarks:e,lastLoaded:(new Date).getTime()}),s&&T.set(!0)};function D(e){let s,t,l,r,p,b,O;return t=new E({props:{type:"BOOKMARK_BOLD",color:"gold",title:"Lesezeichen setzen"}}),{c(){s=a("button"),n(t.$$.fragment),l=a("span"),r=o("Lesezeichen"),this.h()},l(e){s=i(e,"BUTTON",{class:!0});var a=c(s);h(t.$$.fragment,a),l=i(a,"SPAN",{class:!0});var n=c(l);r=m(n,"Lesezeichen"),n.forEach(f),a.forEach(f),this.h()},h(){u(l,"class","sr-only"),u(s,"class","svelte-ww88eb")},m(a,n){$(a,s,n),d(t,s,null),g(s,l),g(l,r),p=!0,b||(O=w(s,"click",y(e[8])),b=!0)},p:v,i(e){p||(k(t.$$.fragment,e),p=!0)},o(e){S(t.$$.fragment,e),p=!1},d(e){e&&f(s),z(t),b=!1,O()}}}function J(e){let s,t,o;return t=new E({props:{type:"BOOKMARK_SOLID",color:"gold",title:"FÃ¼r diese Seite wurde ein Lesezeichen gesetzt"}}),{c(){s=a("span"),n(t.$$.fragment),this.h()},l(e){s=i(e,"SPAN",{class:!0});var a=c(s);h(t.$$.fragment,a),a.forEach(f),this.h()},h(){u(s,"class","lz-logo svelte-ww88eb")},m(e,a){$(e,s,a),d(t,s,null),o=!0},p:v,i(e){o||(k(t.$$.fragment,e),o=!0)},o(e){S(t.$$.fragment,e),o=!1},d(e){e&&f(s),z(t)}}}function M(e){let s,t,N,v,P,T,L,j,A,B,K;t=new E({props:{type:"SHARE",title:"Seite teilen"}});const U=[J,D],_=[];function x(e,s){return e[4]?0:1}return T=x(e),L=_[T]=U[T](e),{c(){s=a("button"),n(t.$$.fragment),N=a("span"),v=o("Teilen"),P=l(),L.c(),j=r(),this.h()},l(e){s=i(e,"BUTTON",{class:!0});var a=c(s);h(t.$$.fragment,a),N=i(a,"SPAN",{class:!0});var n=c(N);v=m(n,"Teilen"),n.forEach(f),a.forEach(f),P=p(e),L.l(e),j=r(),this.h()},h(){u(N,"class","sr-only"),u(s,"class","svelte-ww88eb")},m(a,n){$(a,s,n),d(t,s,null),g(s,N),g(N,v),$(a,P,n),_[T].m(a,n),$(a,j,n),A=!0,B||(K=w(s,"click",y(e[7])),B=!0)},p(e,[s]){let t=T;T=x(e),T===t?_[T].p(e,s):(b(),S(_[t],1,1,(()=>{_[t]=null})),O(),L=_[T],L?L.p(e,s):(L=_[T]=U[T](e),L.c()),k(L,1),L.m(j.parentNode,j))},i(e){A||(k(t.$$.fragment,e),k(L),A=!0)},o(e){S(t.$$.fragment,e),S(L),A=!1},d(e){e&&f(s),z(t),e&&f(P),_[T].d(e),e&&f(j),B=!1,K()}}}function R(e,s,t){let a,n,o=v,l=v;e.$$.on_destroy.push((()=>o())),e.$$.on_destroy.push((()=>l()));let r,i,{url:c=null}=s,{title:h}=s,m=!1;N((async()=>{t(2,r=_()),o(),o=P(r,(e=>t(9,a=e))),t(3,i=B()),l(),l=P(i,(e=>t(10,n=e))),t(0,c=f(c));const e=r.subscribe((e=>{e?.bookmarks&&e?.bookmarks.includes(c)&&t(4,m=!0)}));return()=>e&&e()}));const f=e=>e?e.startsWith("#")?window.location.pathname+e:e:window.location.pathname,p=async()=>{if(n&&0!=Object.keys(n).length){t(0,c=f(c));let e={lzUrl:c,lzBez:h},s="/PtWeb/api/mypt/lesezeichen/";await j("POST",s,JSON.stringify(e)),x(a.bookmarks.concat(c),!1),t(4,m=!0)}else window.location.href=`/profil/login?backurl=${location.pathname}`},u=async(e,s)=>{s=f(s);const t=window.location.host+s;A.set({showShareModal:!0,shareTitle:e,shareUrl:t})};return e.$$set=e=>{"url"in e&&t(0,c=e.url),"title"in e&&t(1,h=e.title)},[c,h,r,i,m,p,u,async()=>await u(h,c),async()=>await p()]}class I extends e{constructor(e){super(),s(this,e,R,M,t,{url:0,title:1})}}export{I as S,_ as g,x as s};
